!function(a){a.fn.flipLightBox=function(b){function C(){1==y?x=w:(x=w,x+=y),a("."+x)[0]&&(a("."+x+" span").hide(),z=0,a("."+x).each(function(){z+=1,a(this).attr("class",x+"-"+z),null==A?A="."+x+"-"+z:A+=", ."+x+"-"+z}),B[x]=z,y++,C())}function D(a){var b=new Image;return b.src=a,b.width}function E(a){var b=new Image;return b.src=a,b.height}function F(){return navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPod")!=-1}function G(){a("#flb-load").html('<div id="flb-loading-img"></div>').show(),setTimeout(function(){a("#flb-loading-img").html("<br />Loading Image")},500),setTimeout(function(){a("#flb-loading-img").prepend('<img width="5" src="'+d+'" /> ')},1e3),setTimeout(function(){a("#flb-loading-img").prepend('<img width="5" src="'+d+'" /> ')},1500),setTimeout(function(){a("#flb-loading-img").prepend('<img width="5" src="'+d+'" /> ')},2e3),setTimeout(function(){a("#flb-loading-img").fadeOut(500)},2500),o=setTimeout(function(){G()},3e3)}var g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,x,z,A,c=a.extend({flip_mode:1,lightbox_background_opacity:.8,lightbox_border_width:10,lightbox_border_color:"#fff",lightbox_z_index:"1000",lightbox_flip_speed:800,lightbox_text_status:1,lightbox_text_style:"font-size: 14px; line-height: 1.4; color: #000; text-align: center;",lightbox_text_background_style:"background-color: #fff; opacity:0.8;",lightbox_text_area_position:"bottom",lightbox_navigation_status:1,next_image_text:"Next &rsaquo;&rsaquo;",back_image_text:"&lsaquo;&lsaquo; Back",next_and_back_image_text_style:"font-weight: bold; color: #000;",image_number_page:"Image",image_number_of:"of",image_number_text_style:"color: #000;",loading_text_color:"#fff",loading_text_opacity:"0.3"},b),d="data:image/gif;base64,R0lGODlhCgARAIABAP///////yH5BAEAAAEALAAAAAAKABEAAAIWTIBpl80No5y00gdXXBjxD4biSJZGAQA7",e="data:image/gif;base64,R0lGODlhMgAyAIABAP///////yH5BAEAAAEALAAAAAAyADIAAALPjI+py+0Po5y0HoCz3rx7/HziKDbkiWZLyp5Kd7VcvL01ImvJvOu2vPLhVAxgkTgEmVIOIQ0QcjWRT+i0dFUmqUFP1GmAZcE/sndsXfK2N3X6KGa3j5BPOW4JjO54ConfJ/HXMygoJWcXwUR46FZYtffVGIZiOKl3iXaGuDZx+egXyclVIQpJ1iPZSRnIqGrWKveqdTr71gWLOnrLd2erW1X2O4cr7GhqvHUMqszIi2mUDOnc4kudljO3Cp3djdsdfQ3OvDu+nYeerr7Ojl4AADs=",f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi+P//PwNAgAEACPwC/tuiTRYAAAAASUVORK5CYII=",h="box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box;",w="flipLightBox",y=1,B=new Array;C(),a(this).append('<div id="flb-lightbox" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; z-index: '+c.lightbox_z_index+"; "+h+'"><div id="flb-lightbox-background" style="width: 100%; height: 100%; background-color: #000; opacity:'+c.lightbox_background_opacity+"; "+h+'"></div><div id="flb-lightbox-content" style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background: none; text-align: center; '+h+'"></div><div id="flb-load" style="position: fixed; top: 40%; left: 0px; width: 100%; text-align: center; font-size: 14px; color: '+c.loading_text_color+"; opacity: "+c.loading_text_opacity+"; "+h+'"></div><div id="flb-lightbox-text" style="position: fixed; '+c.lightbox_text_area_position+": 0px; width: 90%; padding-left: 5%; padding-right: 6%; margin-right: auto; margin-left: auto;"+c.lightbox_text_background_style+" "+c.lightbox_text_style+" "+h+' padding-top: 15px; padding-bottom: 15px;"></div><div id="flb-load2" style="position: fixed; top: 40%; left: 0px; width: 100%; text-align: center; font-size: 14px; color: '+c.loading_text_color+"; opacity: "+c.loading_text_opacity+';"></div>'),a("#flb-lightbox, #flb-lightbox-content, #flb-lightbox-text").hide(),a(A).click(function(b){b.preventDefault(),q=a(this).attr("href"),r=a(this).attr("class"),s=a("."+r+" span").html(),t=r.split("-"),u=B[t[0]],a("#flb-lightbox-text").html(""),null!=s&&""!=s&&1==c.lightbox_text_status&&(1==c.lightbox_navigation_status&&u>1&&a("#flb-lightbox-text").append("<br /><br />"),a("#flb-lightbox-text").append(s)),a("#flb-lightbox").fadeIn(c.lightbox_flip_speed/2),G(),p=document.createElement("img"),a("<img />").attr("src",q).load(function(){p.onload=function(){a("#flb-load").html(""),clearTimeout(o),a("#flb-lightbox-content").html('<img src="'+q+'" id="flb-lightbox-image" style="border: solid '+c.lightbox_border_width+"px "+c.lightbox_border_color+"; "+h+'"/>'),navigator.userAgent.toLowerCase().indexOf("chrome")>-1||navigator.userAgent.match("CriOS")?(k=flb_image_width=p.width,j=flb_image_height=p.height):(k=flb_image_width=D(q),j=flb_image_height=E(q)),1!=c.lightbox_navigation_status&&1!=c.lightbox_text_status||1!=c.lightbox_navigation_status&&(null==s||""==s)||u<=1&&(null==s||""==s)||u<=1&&1!=c.lightbox_text_status?(a("#flb-lightbox-text").css("visibility","hidden"),v=50):(a("#flb-lightbox-text").css("visibility","visible"),v=70),a("#flb-lightbox-content").hide(),setTimeout(function(){function b(b){27==b.keyCode&&a("#flb-close").trigger("click")}a(window).resize(),a("#flb-lightbox-image").attr("src",q).css({width:g,height:j,opacity:0}),setTimeout(function(){a("#flb-lightbox-text").is(":hidden")&&(navigator.userAgent.match(/iPad/i)||F()?a("#flb-lightbox-text").show():a("#flb-lightbox-text").slideToggle())},c.lightbox_flip_speed),window.setTimeout(function(){a("#flb-lightbox-content").show(),a("#flb-lightbox-image").attr("src",q).animate({width:k,height:j,opacity:1},{duration:c.lightbox_flip_speed/2})},c.lightbox_flip_speed/2),i=j+2*c.lightbox_border_width+25,i=(a(window).height()-i)/2-(a("#flb-lightbox-text").height()/2+20)+l,i<0&&(i=10),a("#flb-lightbox-content").prepend('<img id="flb-close" src="'+f+'" width="25px" height="25px" alt="Close" style="margin-top: '+i+"px; margin-left: "+n+"px;"+h+'"/><br />'),a("#flb-close").click(function(){a(document).unbind("keyup",b),a("#flb-close, #flb-next-pic, #flb-back-pic").unbind("click"),a("#flb-close").attr("src",f),a("#flb-lightbox-image").attr("src",q).animate({width:g,opacity:0},{duration:c.lightbox_flip_speed/2}),setTimeout(function(){a("#flb-lightbox").fadeOut(500),a("#flb-lightbox-text").is(":visible")&&(navigator.userAgent.match(/iPad/i)||F()?a("#flb-lightbox-text").fadeOut():a("#flb-lightbox-text").slideToggle())},c.lightbox_flip_speed/2)}),window.setTimeout(function(){a("#flb-close").attr("src",e),clearTimeout(o)},c.lightbox_flip_speed),1==c.lightbox_navigation_status&&u>1&&(t[1]<u&&(a("#flb-lightbox-text").prepend('<a href="next" id="flb-next-pic" style="'+c.next_and_back_image_text_style+h+'">'+c.next_image_text+"</a>"),a("#flb-next-pic").click(function(d){a(document).unbind("keyup",b),a("#flb-close, #flb-next-pic, #flb-back-pic").unbind("click"),a("#flb-lightbox-text").is(":visible")&&(navigator.userAgent.match(/iPad/i)||F()?a("#flb-lightbox-text").fadeOut():a("#flb-lightbox-text").slideToggle()),d.preventDefault(),setTimeout(function(){a("."+t[0]+"-"+(Math.floor(t[1])+1)).trigger("click")},c.lightbox_flip_speed/2),a("#flb-close").attr("src",f),a("#flb-lightbox-image").attr("src",q).animate({width:g,opacity:0},{duration:c.lightbox_flip_speed/2})})),a("#flb-lightbox-text").prepend('<span style="'+c.image_number_text_style+h+'"> '+c.image_number_page+" "+t[1]+" "+c.image_number_of+" "+u+" </span>"),t[1]>1&&(a("#flb-lightbox-text").prepend('<a href="next" id="flb-back-pic" style="'+c.next_and_back_image_text_style+h+'">'+c.back_image_text+"</a>"),a("#flb-back-pic").click(function(d){a(document).unbind("keyup",b),a("#flb-close, #flb-next-pic, #flb-back-pic").unbind("click"),a("#flb-lightbox-text").is(":visible")&&(navigator.userAgent.match(/iPad/i)||F()?a("#flb-lightbox-text").fadeOut():a("#flb-lightbox-text").slideToggle()),d.preventDefault(),setTimeout(function(){a("."+t[0]+"-"+(Math.floor(t[1])-1)).trigger("click")},c.lightbox_flip_speed/2),a("#flb-close").attr("src",f),a("#flb-lightbox-image").attr("src",q).animate({width:g,opacity:0},{duration:c.lightbox_flip_speed/2})}))),a(document).keyup(b)},100)},p.src=q}).error(function(){a("#flb-load").html(""),clearTimeout(o),setTimeout(function(){clearTimeout(o)},3e3),a("#flb-lightbox").fadeOut(500),a("#flb-lightbox-content, #flb-lightbox-text").html(""),a("#flb-lightbox-text").hide()})}),a(window).resize(function(){m=1,a(window).height()<flb_image_height+a("#flb-lightbox-text").height()+v+2*c.lightbox_border_width&&(j=a(window).height()-2*c.lightbox_border_width-a("#flb-lightbox-text").height()-v,k=flb_image_width/flb_image_height*j,m=0),a(window).width()<flb_image_width+60+2*c.lightbox_border_width&&a(window).width()-flb_image_width<a(window).height()-flb_image_height-(a("#flb-lightbox-text").height()+v)&&(k=a(window).width()-2*c.lightbox_border_width-60,j=flb_image_height/flb_image_width*k,m=0),1==m&&(k=flb_image_width,j=flb_image_height),l="top"==c.lightbox_text_area_position&&70==v?2*(a("#flb-lightbox-text").height()/2+15):0,a("#flb-lightbox-image").css({width:k,height:j}),i=j+2*c.lightbox_border_width+25,i=(a(window).height()-i)/2-(a("#flb-lightbox-text").height()/2+20)+l,i<0&&(i=10),a("#flb-close").css({"margin-top":i,"margin-left":a(window).width()-85+2*c.lightbox_border_width+(a("#flb-lightbox-text").height()/2+20)-l}),n=k+25+2*c.lightbox_border_width,a("#flb-close").attr("style","margin-top: "+i+"px; margin-left: "+n+"px; "+h),g=0==c.flip_mode?k:0})}}(jQuery);
